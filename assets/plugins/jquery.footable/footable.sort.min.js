(function (t, e, undefined) {
    function a() {
        var e = this;
        e.name = "Footable Sortable", e.init = function (a) {
            a.options.sort === !0 && t(a.table).bind({
                footable_initialized: function () {
                    var i, o, n = a.options.classes.sort, r = a.options.events.sort, l = t(a.table), d = l.find("> tbody");
                    if (l.data("sort") !== !1) {
                        l.find("> thead > tr:last-child > th, > thead > tr:last-child > td").each(function () {
                            o = t(this), i = a.columns[o.index()], i.sort.ignore === !0 || o.hasClass(n.sortable) || (o.addClass(n.sortable), t("<span />").addClass(n.indicator).appendTo(o))
                        }), l.find("> thead > tr:last-child > th." + n.sortable + ", > thead > tr:last-child > td." + n.sortable).unbind("click.footable").bind("click.footable", function (s) {
                            if (o = t(this), i = a.columns[o.index()], i.sort.ignore === !0)return !0;
                            l.data("sorted", i.index), s.preventDefault(), l.find("> thead > tr:last-child > th, > thead > tr:last-child > td").not(o).removeClass(n.sorted + " " + n.descending);
                            var u = !0, f = !0;
                            o.hasClass(n.sorted) ? (u = !1, f = !1) : o.hasClass(n.descending) && (u = !1), f ? o.removeClass(n.descending).addClass(n.sorted) : o.removeClass(n.sorted).addClass(n.descending);
                            var g = a.raise(r.sorting, {column: i, direction: f ? "ASC" : "DESC"});
                            return g && g.result === !1 ? undefined : (u ? e.sort(a, d, i) : e.reverse(a, d), a.bindToggleSelectors(), a.raise(r.sorted, {
                                column: i,
                                ascending: f
                            }), !1)
                        });
                        var s = !1;
                        for (var u in a.columns)if (i = a.columns[u], i.sort.initial) {
                            e.sort(a, d, i), s = !0, o = l.find("> thead > tr:last-child > th:eq(" + u + "), > thead > tr:last-child > td:eq(" + u + ")"), "descending" === i.sort.initial ? (e.reverse(a, d), o.addClass(n.descending)) : o.addClass(n.sorted);
                            break
                        }
                        s && a.bindToggleSelectors()
                    }
                }, footable_column_data: function (e) {
                    var a = t(e.column.th);
                    e.column.data.sort = e.column.data.sort || {}, e.column.data.sort.initial = a.data("sort-initial") || !1, e.column.data.sort.ignore = a.data("sort-ignore") || !1, e.column.data.sort.selector = a.data("sort-selector") || null;
                    var i = a.data("sort-match") || 0;
                    i >= e.column.data.matches.length && (i = 0), e.column.data.sort.match = e.column.data.matches[i]
                }
            })
        }, e.rows = function (e, a, i) {
            var o = [];
            return a.find("> tr").each(function () {
                var a = t(this), n = null;
                if (a.hasClass(e.options.classes.detail))return !0;
                a.next().hasClass(e.options.classes.detail) && (n = a.next().get(0));
                var r = {row: a, detail: n};
                return i !== undefined && (r.value = e.parse(this.cells[i.sort.match], i)), o.push(r), !0
            }).detach(), o
        }, e.sort = function (t, a, i) {
            var o = e.rows(t, a, i), n = t.options.sorters[i.type] || t.options.sorters.alpha;
            o.sort(function (t, e) {
                return n(t.value, e.value)
            });
            for (var r = 0; o.length > r; r++)a.append(o[r].row), null !== o[r].detail && a.append(o[r].detail)
        }, e.reverse = function (t, a) {
            for (var i = e.rows(t, a), o = i.length - 1; o >= 0; o--)a.append(i[o].row), null !== i[o].detail && a.append(i[o].detail)
        }
    }

    if (e.footable === undefined || null === e.footable)throw Error("Please check and make sure footable.js is included in the page and is loaded prior to this script.");
    var i = {
        sort: !0,
        sorters: {
            alpha: function (t, e) {
                return t === e ? 0 : e > t ? -1 : 1
            }, numeric: function (t, e) {
                return t - e
            }
        },
        classes: {
            sort: {
                sortable: "footable-sortable",
                sorted: "footable-sorted",
                descending: "footable-sorted-desc",
                indicator: "footable-sort-indicator"
            }
        },
        events: {sort: {sorting: "footable_sorting", sorted: "footable_sorted"}}
    };
    e.footable.plugins.register(new a, i)
})(jQuery, window);